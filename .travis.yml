language: python
python: '2.7'
sudo: false
branches:
  only:
  - master
before_install:
- export DISPLAY=:99.0
- sh -e /etc/init.d/xvfb start
addons:
  firefox: '42.0'
install:
- pip install -r test_requirements.txt
- pip install -r requirements.txt
- pip install -r doc_requirements.txt
- ./scripts/install_browsermob_proxy.sh
script:
- pylint bok_choy
- export PATH=browsermobtemp/browsermob-proxy/bin:$PATH
- ./run_tests.sh
after_success:
- pip install coveralls
- coveralls
deploy:
  provider: pypi
  user: edx
  password:
    secure: o6nRxgpLeCLLh1yerbXvWOi95wyPGzuP+d1CpjeSq5bLYKpij+IDzpWZxSO+OzQWoUFVmFkv+3h1U9W2Awzc6ptl0MCJjTBxBmMmrrgodPPg1gHhQe0Da+Fqw2MTcv5UK4yUoJ5AGtj0N2XZhKMl00pvU10AVSVV1Izm61CLn9c=
  distributions: sdist
  on:
    tags: true
